<html>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
    
    <body>
        <canvas id="chart">
        </canvas>
    </body>

    <script>
        d3.csv('https://raw.githubusercontent.com/felipealencar/courses/master/frontend/lec-22/chart-js/atp_wta.csv').then(criarGrafico);

        /*var chart = new Chart('chart', {
            type: 'horizontalBar',
            data: {
                labels: ['A', 'B', 'C'],
                datasets: [
                    {
                        data: [10, 20, 30]
                    }
                ]
            }
        });*/

        function criarGrafico(jogadores) {
            var rotulosComNomesDosJogadores = jogadores.map(function(d) {return d.Nome});
            var dadosDasSemanas = jogadores.map(function(d) {return d.Semanas});
            var chart = new Chart('chart', {
                type: 'horizontalBar',
                options: {
                    scales: {
                        xAxes: [
                            {
                                scaleLabel: {
                                display: true,
                                labelString: 'NÃºmero de semanas em primeiro lugar no ranking.',
                                fontSize: 16
                                }
                            }
                        ]
                    },
                    plugins: {
                        legend: {
                            display: false,
                            text: 'Semanas'
                        }
                    }
                },    
                data: {
                    labels: rotulosComNomesDosJogadores,
                    datasets: [
                        {
                            label: 'Semanas',
                            data: dadosDasSemanas
                        }
                    ]
                }
            });
        }


    </script>
</html>